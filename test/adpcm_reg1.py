import RsOPNA
import time

rs = RsOPNA.RsOPNA()
rs.open()
rs.reset()

'''
ADPCM再生を中断した後のダミーリードを観察するテストプログラム
1. 00-FFのデータを書き込む
2. 再生・停止・READを繰り返し、ダミーリードの値をみる

全体
    必ず連続のデータが読み出されていることから、再生もバッファを通過していることがわかる。
'''

rs.seq_mem_limit(0xffff)

adpcm_data = []
for i in range(256):
    adpcm_data.append(i)

rs.seq_mem_fill_pat(0, int(256/32) - 1, adpcm_data, 256, "ADPCM DATA")

for i in range(16):
    rs.seq_play(0, int(256/32) - 1, int(512), 0, True, "PLAY {:d}".format(i))
    time.sleep(i / 100.0)
    rs.seq_stop("STOP {:d}".format(i))
    rs.seq_mem_read(0, 0, 32 + 2, "READ {:d}".format(i))

'''
O00:01 O00:00 
O0C:FF O0D:FF 
ADPCM DATA
O10:00 O10:80 O00:60 O01:02 O02:00 O03:00 O04:07 O05:00 

00000 O08:00 O08:01 O08:02 O08:03 O08:04 O08:05 O08:06 O08:07 O08:08 O08:09 O08:0A O08:0B O08:0C O08:0D O08:0E O08:0F 
00010 O08:10 O08:11 O08:12 O08:13 O08:14 O08:15 O08:16 O08:17 O08:18 O08:19 O08:1A O08:1B O08:1C O08:1D O08:1E O08:1F 
00020 O08:20 O08:21 O08:22 O08:23 O08:24 O08:25 O08:26 O08:27 O08:28 O08:29 O08:2A O08:2B O08:2C O08:2D O08:2E O08:2F 
00030 O08:30 O08:31 O08:32 O08:33 O08:34 O08:35 O08:36 O08:37 O08:38 O08:39 O08:3A O08:3B O08:3C O08:3D O08:3E O08:3F 
00040 O08:40 O08:41 O08:42 O08:43 O08:44 O08:45 O08:46 O08:47 O08:48 O08:49 O08:4A O08:4B O08:4C O08:4D O08:4E O08:4F 
00050 O08:50 O08:51 O08:52 O08:53 O08:54 O08:55 O08:56 O08:57 O08:58 O08:59 O08:5A O08:5B O08:5C O08:5D O08:5E O08:5F 
00060 O08:60 O08:61 O08:62 O08:63 O08:64 O08:65 O08:66 O08:67 O08:68 O08:69 O08:6A O08:6B O08:6C O08:6D O08:6E O08:6F 
00070 O08:70 O08:71 O08:72 O08:73 O08:74 O08:75 O08:76 O08:77 O08:78 O08:79 O08:7A O08:7B O08:7C O08:7D O08:7E O08:7F 
00080 O08:80 O08:81 O08:82 O08:83 O08:84 O08:85 O08:86 O08:87 O08:88 O08:89 O08:8A O08:8B O08:8C O08:8D O08:8E O08:8F 
00090 O08:90 O08:91 O08:92 O08:93 O08:94 O08:95 O08:96 O08:97 O08:98 O08:99 O08:9A O08:9B O08:9C O08:9D O08:9E O08:9F 
000a0 O08:A0 O08:A1 O08:A2 O08:A3 O08:A4 O08:A5 O08:A6 O08:A7 O08:A8 O08:A9 O08:AA O08:AB O08:AC O08:AD O08:AE O08:AF 
000b0 O08:B0 O08:B1 O08:B2 O08:B3 O08:B4 O08:B5 O08:B6 O08:B7 O08:B8 O08:B9 O08:BA O08:BB O08:BC O08:BD O08:BE O08:BF 
000c0 O08:C0 O08:C1 O08:C2 O08:C3 O08:C4 O08:C5 O08:C6 O08:C7 O08:C8 O08:C9 O08:CA O08:CB O08:CC O08:CD O08:CE O08:CF 
000d0 O08:D0 O08:D1 O08:D2 O08:D3 O08:D4 O08:D5 O08:D6 O08:D7 O08:D8 O08:D9 O08:DA O08:DB O08:DC O08:DD O08:DE O08:DF 
000e0 O08:E0 O08:E1 O08:E2 O08:E3 O08:E4 O08:E5 O08:E6 O08:E7 O08:E8 O08:E9 O08:EA O08:EB O08:EC O08:ED O08:EE O08:EF 
000f0 O08:F0 O08:F1 O08:F2 O08:F3 O08:F4 O08:F5 O08:F6 O08:F7 O08:F8 O08:F9 O08:FA O08:FB O08:FC O08:FD O08:FE O08:FF O00:00 O10:80 

PLAY 0
O10:00 O10:80 O00:20 O01:C2 O02:00 O03:00 O04:07 O05:00 O09:00 O0A:02 O0B:00 O00:B0 

STOP 0
O00:A1 O00:00 O10:80 

READ 0
O10:00 O10:80 O00:20 O01:02 O02:00 O03:00 O04:00 O05:00 
R2A:08 R2B:08 R00:08 R01:08 R02:08 R03:08 R04:08 R05:08 R06:08 R07:08 R08:08 R09:08 R0A:08 R0B:08 R0C:08 R0D:08 R0E:08 R0F:08 R10:08 R11:08 R12:08 R13:08 R14:08 R15:08 R16:08 R17:08 R18:08 R19:08 R1A:08 R1B:08 R1C:08 R1D:08 R1E:08 R1F:0C 
O00:00 O10:80 

PLAY 1
O10:00 O10:80 O00:20 O01:C2 O02:00 O03:00 O04:07 O05:00 O09:00 O0A:02 O0B:00 O00:B0 

STOP 1
O00:A1 O00:00 O10:80 

READ 1
O10:00 O10:80 O00:20 O01:02 O02:00 O03:00 O04:00 O05:00 
R2D:08 R2E:08 R00:08 R01:08 R02:08 R03:08 R04:08 R05:08 R06:08 R07:08 R08:08 R09:08 R0A:08 R0B:08 R0C:08 R0D:08 R0E:08 R0F:08 R10:08 R11:08 R12:08 R13:08 R14:08 R15:08 R16:08 R17:08 R18:08 R19:08 R1A:08 R1B:08 R1C:08 R1D:08 R1E:08 R1F:0C 
O00:00 O10:80 

PLAY 2
O10:00 O10:80 O00:20 O01:C2 O02:00 O03:00 O04:07 O05:00 O09:00 O0A:02 O0B:00 O00:B0 

STOP 2
O00:A1 O00:00 O10:80 

READ 2
O10:00 O10:80 O00:20 O01:02 O02:00 O03:00 O04:00 O05:00 
R2D:08 R2E:08 R00:08 R01:08 R02:08 R03:08 R04:08 R05:08 R06:08 R07:08 R08:08 R09:08 R0A:08 R0B:08 R0C:08 R0D:08 R0E:08 R0F:08 R10:08 R11:08 R12:08 R13:08 R14:08 R15:08 R16:08 R17:08 R18:08 R19:08 R1A:08 R1B:08 R1C:08 R1D:08 R1E:08 R1F:0C 
O00:00 O10:80 

PLAY 3
O10:00 O10:80 O00:20 O01:C2 O02:00 O03:00 O04:07 O05:00 O09:00 O0A:02 O0B:00 O00:B0 

STOP 3
O00:A1 O00:00 O10:80 

READ 3
O10:00 O10:80 O00:20 O01:02 O02:00 O03:00 O04:00 O05:00 
R31:08 R32:08 R00:08 R01:08 R02:08 R03:08 R04:08 R05:08 R06:08 R07:08 R08:08 R09:08 R0A:08 R0B:08 R0C:08 R0D:08 R0E:08 R0F:08 R10:08 R11:08 R12:08 R13:08 R14:08 R15:08 R16:08 R17:08 R18:08 R19:08 R1A:08 R1B:08 R1C:08 R1D:08 R1E:08 R1F:0C 
O00:00 O10:80 

PLAY 4
O10:00 O10:80 O00:20 O01:C2 O02:00 O03:00 O04:07 O05:00 O09:00 O0A:02 O0B:00 O00:B0 

STOP 4
O00:A1 O00:00 O10:80 

READ 4
O10:00 O10:80 O00:20 O01:02 O02:00 O03:00 O04:00 O05:00 
R34:08 R35:08 R00:08 R01:08 R02:08 R03:08 R04:08 R05:08 R06:08 R07:08 R08:08 R09:08 R0A:08 R0B:08 R0C:08 R0D:08 R0E:08 R0F:08 R10:08 R11:08 R12:08 R13:08 R14:08 R15:08 R16:08 R17:08 R18:08 R19:08 R1A:08 R1B:08 R1C:08 R1D:08 R1E:08 R1F:0C 
O00:00 O10:80 

PLAY 5
O10:00 O10:80 O00:20 O01:C2 O02:00 O03:00 O04:07 O05:00 O09:00 O0A:02 O0B:00 O00:B0 

STOP 5
O00:A1 O00:00 O10:80 

READ 5
O10:00 O10:80 O00:20 O01:02 O02:00 O03:00 O04:00 O05:00 
R34:08 R35:08 R00:08 R01:08 R02:08 R03:08 R04:08 R05:08 R06:08 R07:08 R08:08 R09:08 R0A:08 R0B:08 R0C:08 R0D:08 R0E:08 R0F:08 R10:08 R11:08 R12:08 R13:08 R14:08 R15:08 R16:08 R17:08 R18:08 R19:08 R1A:08 R1B:08 R1C:08 R1D:08 R1E:08 R1F:0C 
O00:00 O10:80 

PLAY 6
O10:00 O10:80 O00:20 O01:C2 O02:00 O03:00 O04:07 O05:00 O09:00 O0A:02 O0B:00 O00:B0 

STOP 6
O00:A1 O00:00 O10:80 

READ 6
O10:00 O10:80 O00:20 O01:02 O02:00 O03:00 O04:00 O05:00 
R38:08 R39:08 R00:08 R01:08 R02:08 R03:08 R04:08 R05:08 R06:08 R07:08 R08:08 R09:08 R0A:08 R0B:08 R0C:08 R0D:08 R0E:08 R0F:08 R10:08 R11:08 R12:08 R13:08 R14:08 R15:08 R16:08 R17:08 R18:08 R19:08 R1A:08 R1B:08 R1C:08 R1D:08 R1E:08 R1F:0C 
O00:00 O10:80 

PLAY 7
O10:00 O10:80 O00:20 O01:C2 O02:00 O03:00 O04:07 O05:00 O09:00 O0A:02 O0B:00 O00:B0 

STOP 7
O00:A1 O00:00 O10:80 

READ 7
O10:00 O10:80 O00:20 O01:02 O02:00 O03:00 O04:00 O05:00 
R3B:08 R3C:08 R00:08 R01:08 R02:08 R03:08 R04:08 R05:08 R06:08 R07:08 R08:08 R09:08 R0A:08 R0B:08 R0C:08 R0D:08 R0E:08 R0F:08 R10:08 R11:08 R12:08 R13:08 R14:08 R15:08 R16:08 R17:08 R18:08 R19:08 R1A:08 R1B:08 R1C:08 R1D:08 R1E:08 R1F:0C 
O00:00 O10:80 

PLAY 8
O10:00 O10:80 O00:20 O01:C2 O02:00 O03:00 O04:07 O05:00 O09:00 O0A:02 O0B:00 O00:B0 

STOP 8
O00:A1 O00:00 O10:80 

READ 8
O10:00 O10:80 O00:20 O01:02 O02:00 O03:00 O04:00 O05:00 
R3B:08 R3C:08 R00:08 R01:08 R02:08 R03:08 R04:08 R05:08 R06:08 R07:08 R08:08 R09:08 R0A:08 R0B:08 R0C:08 R0D:08 R0E:08 R0F:08 R10:08 R11:08 R12:08 R13:08 R14:08 R15:08 R16:08 R17:08 R18:08 R19:08 R1A:08 R1B:08 R1C:08 R1D:08 R1E:08 R1F:0C 
O00:00 O10:80 

PLAY 9
O10:00 O10:80 O00:20 O01:C2 O02:00 O03:00 O04:07 O05:00 O09:00 O0A:02 O0B:00 O00:B0 

STOP 9
O00:A1 O00:00 O10:80 

READ 9
O10:00 O10:80 O00:20 O01:02 O02:00 O03:00 O04:00 O05:00 
R3E:08 R3F:08 R00:08 R01:08 R02:08 R03:08 R04:08 R05:08 R06:08 R07:08 R08:08 R09:08 R0A:08 R0B:08 R0C:08 R0D:08 R0E:08 R0F:08 R10:08 R11:08 R12:08 R13:08 R14:08 R15:08 R16:08 R17:08 R18:08 R19:08 R1A:08 R1B:08 R1C:08 R1D:08 R1E:08 R1F:0C 
O00:00 O10:80 

PLAY 10
O10:00 O10:80 O00:20 O01:C2 O02:00 O03:00 O04:07 O05:00 O09:00 O0A:02 O0B:00 O00:B0 

STOP 10
O00:A1 O00:00 O10:80 

READ 10
O10:00 O10:80 O00:20 O01:02 O02:00 O03:00 O04:00 O05:00 
R42:48 R43:48 R00:08 R01:08 R02:08 R03:08 R04:08 R05:08 R06:08 R07:08 R08:08 R09:08 R0A:08 R0B:08 R0C:08 R0D:08 R0E:08 R0F:08 R10:08 R11:08 R12:08 R13:08 R14:08 R15:08 R16:08 R17:08 R18:08 R19:08 R1A:08 R1B:08 R1C:08 R1D:08 R1E:08 R1F:0C 
O00:00 O10:80 

PLAY 11
O10:00 O10:80 O00:20 O01:C2 O02:00 O03:00 O04:07 O05:00 O09:00 O0A:02 O0B:00 O00:B0 

STOP 11
O00:A1 O00:00 O10:80 

READ 11
O10:00 O10:80 O00:20 O01:02 O02:00 O03:00 O04:00 O05:00 
R42:48 R43:48 R00:08 R01:08 R02:08 R03:08 R04:08 R05:08 R06:08 R07:08 R08:08 R09:08 R0A:08 R0B:08 R0C:08 R0D:08 R0E:08 R0F:08 R10:08 R11:08 R12:08 R13:08 R14:08 R15:08 R16:08 R17:08 R18:08 R19:08 R1A:08 R1B:08 R1C:08 R1D:08 R1E:08 R1F:0C 
O00:00 O10:80 

PLAY 12
O10:00 O10:80 O00:20 O01:C2 O02:00 O03:00 O04:07 O05:00 O09:00 O0A:02 O0B:00 O00:B0 

STOP 12
O00:A1 O00:00 O10:80 

READ 12
O10:00 O10:80 O00:20 O01:02 O02:00 O03:00 O04:00 O05:00 
R46:48 R47:48 R00:08 R01:08 R02:08 R03:08 R04:08 R05:08 R06:08 R07:08 R08:08 R09:08 R0A:08 R0B:08 R0C:08 R0D:08 R0E:08 R0F:08 R10:08 R11:08 R12:08 R13:08 R14:08 R15:08 R16:08 R17:08 R18:08 R19:08 R1A:08 R1B:08 R1C:08 R1D:08 R1E:08 R1F:0C 
O00:00 O10:80 

PLAY 13
O10:00 O10:80 O00:20 O01:C2 O02:00 O03:00 O04:07 O05:00 O09:00 O0A:02 O0B:00 O00:B0 

STOP 13
O00:A1 O00:00 O10:80 

READ 13
O10:00 O10:80 O00:20 O01:02 O02:00 O03:00 O04:00 O05:00 
R45:48 R46:48 R00:08 R01:08 R02:08 R03:08 R04:08 R05:08 R06:08 R07:08 R08:08 R09:08 R0A:08 R0B:08 R0C:08 R0D:08 R0E:08 R0F:08 R10:08 R11:08 R12:08 R13:08 R14:08 R15:08 R16:08 R17:08 R18:08 R19:08 R1A:08 R1B:08 R1C:08 R1D:08 R1E:08 R1F:0C 
O00:00 O10:80 

PLAY 14
O10:00 O10:80 O00:20 O01:C2 O02:00 O03:00 O04:07 O05:00 O09:00 O0A:02 O0B:00 O00:B0 

STOP 14
O00:A1 O00:00 O10:80 

READ 14
O10:00 O10:80 O00:20 O01:02 O02:00 O03:00 O04:00 O05:00 
R49:48 R4A:48 R00:08 R01:08 R02:08 R03:08 R04:08 R05:08 R06:08 R07:08 R08:08 R09:08 R0A:08 R0B:08 R0C:08 R0D:08 R0E:08 R0F:08 R10:08 R11:08 R12:08 R13:08 R14:08 R15:08 R16:08 R17:08 R18:08 R19:08 R1A:08 R1B:08 R1C:08 R1D:08 R1E:08 R1F:0C 
O00:00 O10:80 

PLAY 15
O10:00 O10:80 O00:20 O01:C2 O02:00 O03:00 O04:07 O05:00 O09:00 O0A:02 O0B:00 O00:B0 

STOP 15
O00:A1 O00:00 O10:80 

READ 15
O10:00 O10:80 O00:20 O01:02 O02:00 O03:00 O04:00 O05:00 
R4C:48 R4D:48 R00:08 R01:08 R02:08 R03:08 R04:08 R05:08 R06:08 R07:08 R08:08 R09:08 R0A:08 R0B:08 R0C:08 R0D:08 R0E:08 R0F:08 R10:08 R11:08 R12:08 R13:08 R14:08 R15:08 R16:08 R17:08 R18:08 R19:08 R1A:08 R1B:08 R1C:08 R1D:08 R1E:08 R1F:0C 
O00:00 O10:80 
'''